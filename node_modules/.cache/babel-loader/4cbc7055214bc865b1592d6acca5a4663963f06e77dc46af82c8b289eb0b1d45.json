{"ast":null,"code":"import { user_api_error_code } from \"./error_code\";\nimport { refreshToken } from \"./user_api_handler\";\nimport { getUserRefreshToken, setUserTokens, getUserToken, getUserId } from \"../cookie_handler/user_cookie_handler\";\nconst classroomApiBaseUrl = \"https://tmentor.xyz/classroom\";\nexport async function getClassroomList() {\n  const response = await fetch(classroomApiBaseUrl + '/info/classroomList?userId=' + getUserId(), {\n    headers: {\n      authToken: getUserToken()\n    }\n  });\n  const responseBody = await response.json();\n  if (responseBody.code === user_api_error_code.tokenExpired) {\n    const newTokens = await refreshToken(getUserRefreshToken());\n    setUserTokens(newTokens.accessToken, newTokens.refreshToken);\n    return getClassroomList();\n  }\n  if (responseBody.code !== \"0000\") {\n    console.log(responseBody.code);\n    throw new Error('get classroom list fail!');\n  }\n  return responseBody.data;\n}\nexport async function getClassroomId() {\n  const response = await fetch(classroomApiBaseUrl + \"/info/userClassroomId?userId=\" + getUserId(), {\n    headers: {\n      authToken: getUserToken()\n    }\n  });\n  const responseBody = await response.json();\n  if (responseBody.code === user_api_error_code.tokenExpired) {\n    const newTokens = await refreshToken(getUserRefreshToken());\n    setUserTokens(newTokens.accessToken, newTokens.refreshToken);\n    return getClassroomId();\n  }\n  if (responseBody.code !== \"0000\") {\n    console.log(responseBody.code);\n    throw new Error('get classroom list fail!');\n  }\n  return responseBody.data;\n}\nexport async function getClassroomStatus(classroomId) {\n  const response = await fetch(classroomApiBaseUrl + \"/info/status?classroomId=\" + classroomId);\n  const responseBody = await response.json();\n  if (responseBody.code !== \"0000\") {\n    console.log(responseBody.code);\n    throw new Error('get classroom status fail!');\n  }\n  return;\n}","map":{"version":3,"names":["user_api_error_code","refreshToken","getUserRefreshToken","setUserTokens","getUserToken","getUserId","classroomApiBaseUrl","getClassroomList","response","fetch","headers","authToken","responseBody","json","code","tokenExpired","newTokens","accessToken","console","log","Error","data","getClassroomId","getClassroomStatus","classroomId"],"sources":["/Users/hongyixun/Desktop/tmentor/tmentor_web/src/api_handler/classroom_api_handler.js"],"sourcesContent":["import { user_api_error_code } from \"./error_code\";\nimport { refreshToken } from \"./user_api_handler\";\nimport { getUserRefreshToken, setUserTokens, getUserToken, getUserId } from \"../cookie_handler/user_cookie_handler\";\n\nconst classroomApiBaseUrl = \"https://tmentor.xyz/classroom\"\n\nexport async function getClassroomList() {\n    const response = await fetch(classroomApiBaseUrl + '/info/classroomList?userId=' + getUserId(), {\n        headers: {\n            authToken: getUserToken()\n        }\n    });\n\n    const responseBody = await response.json()\n\n    if(responseBody.code === user_api_error_code.tokenExpired) {\n        const newTokens = await refreshToken(getUserRefreshToken())\n        setUserTokens(newTokens.accessToken, newTokens.refreshToken)\n        return getClassroomList()\n    }\n    if(responseBody.code !== \"0000\") {\n        console.log(responseBody.code)\n        throw new Error('get classroom list fail!');\n    }\n\n    return responseBody.data;\n}\n\nexport async function getClassroomId() {\n    const response = await fetch(classroomApiBaseUrl + \"/info/userClassroomId?userId=\" + getUserId(), {\n        headers: {\n            authToken: getUserToken()\n        }\n    })\n    const responseBody = await response.json()\n\n    if(responseBody.code === user_api_error_code.tokenExpired) {\n        const newTokens = await refreshToken(getUserRefreshToken())\n        setUserTokens(newTokens.accessToken, newTokens.refreshToken)\n        return getClassroomId()\n    }\n    if(responseBody.code !== \"0000\") {\n        console.log(responseBody.code)\n        throw new Error('get classroom list fail!');\n    }\n\n    return responseBody.data\n}\n\nexport async function getClassroomStatus(classroomId) {\n    const response = await fetch(classroomApiBaseUrl + \"/info/status?classroomId=\" + classroomId)\n    const responseBody = await response.json()\n\n    if(responseBody.code !== \"0000\") {\n        console.log(responseBody.code)\n        throw new Error('get classroom status fail!');\n    }\n\n    return \n}"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,cAAc;AAClD,SAASC,YAAY,QAAQ,oBAAoB;AACjD,SAASC,mBAAmB,EAAEC,aAAa,EAAEC,YAAY,EAAEC,SAAS,QAAQ,uCAAuC;AAEnH,MAAMC,mBAAmB,GAAG,+BAA+B;AAE3D,OAAO,eAAeC,gBAAgBA,CAAA,EAAG;EACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,mBAAmB,GAAG,6BAA6B,GAAGD,SAAS,EAAE,EAAE;IAC5FK,OAAO,EAAE;MACLC,SAAS,EAAEP,YAAY;IAC3B;EACJ,CAAC,CAAC;EAEF,MAAMQ,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE;EAE1C,IAAGD,YAAY,CAACE,IAAI,KAAKd,mBAAmB,CAACe,YAAY,EAAE;IACvD,MAAMC,SAAS,GAAG,MAAMf,YAAY,CAACC,mBAAmB,EAAE,CAAC;IAC3DC,aAAa,CAACa,SAAS,CAACC,WAAW,EAAED,SAAS,CAACf,YAAY,CAAC;IAC5D,OAAOM,gBAAgB,EAAE;EAC7B;EACA,IAAGK,YAAY,CAACE,IAAI,KAAK,MAAM,EAAE;IAC7BI,OAAO,CAACC,GAAG,CAACP,YAAY,CAACE,IAAI,CAAC;IAC9B,MAAM,IAAIM,KAAK,CAAC,0BAA0B,CAAC;EAC/C;EAEA,OAAOR,YAAY,CAACS,IAAI;AAC5B;AAEA,OAAO,eAAeC,cAAcA,CAAA,EAAG;EACnC,MAAMd,QAAQ,GAAG,MAAMC,KAAK,CAACH,mBAAmB,GAAG,+BAA+B,GAAGD,SAAS,EAAE,EAAE;IAC9FK,OAAO,EAAE;MACLC,SAAS,EAAEP,YAAY;IAC3B;EACJ,CAAC,CAAC;EACF,MAAMQ,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE;EAE1C,IAAGD,YAAY,CAACE,IAAI,KAAKd,mBAAmB,CAACe,YAAY,EAAE;IACvD,MAAMC,SAAS,GAAG,MAAMf,YAAY,CAACC,mBAAmB,EAAE,CAAC;IAC3DC,aAAa,CAACa,SAAS,CAACC,WAAW,EAAED,SAAS,CAACf,YAAY,CAAC;IAC5D,OAAOqB,cAAc,EAAE;EAC3B;EACA,IAAGV,YAAY,CAACE,IAAI,KAAK,MAAM,EAAE;IAC7BI,OAAO,CAACC,GAAG,CAACP,YAAY,CAACE,IAAI,CAAC;IAC9B,MAAM,IAAIM,KAAK,CAAC,0BAA0B,CAAC;EAC/C;EAEA,OAAOR,YAAY,CAACS,IAAI;AAC5B;AAEA,OAAO,eAAeE,kBAAkBA,CAACC,WAAW,EAAE;EAClD,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAACH,mBAAmB,GAAG,2BAA2B,GAAGkB,WAAW,CAAC;EAC7F,MAAMZ,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE;EAE1C,IAAGD,YAAY,CAACE,IAAI,KAAK,MAAM,EAAE;IAC7BI,OAAO,CAACC,GAAG,CAACP,YAAY,CAACE,IAAI,CAAC;IAC9B,MAAM,IAAIM,KAAK,CAAC,4BAA4B,CAAC;EACjD;EAEA;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}