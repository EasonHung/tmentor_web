{"ast":null,"code":"import { getUserId } from \"../../../cookie_handler/user_cookie_handler\";\nconst classroomWsUrl = \"ws://35.229.189.182/ws/classroom\";\nlet classroomWs;\nexport function startClassroomWs(setClassroomList, classroomList) {\n  classroomWs = new WebSocket(classroomWsUrl + \"/?userId=\" + getUserId() + \"&applicationType=app\");\n  classroomWs.onmessage = function (event) {\n    const message = JSON.parse(event.data);\n    switch (message.cmd) {\n      case \"open room\":\n        const newList = classroomList.map(classroom => {\n          if (classroom.classroomId === message.classroomId) {\n            return {\n              ...classroom,\n              status: 'online'\n            };\n          }\n          return classroom;\n        });\n        console.log(newList);\n        setClassroomList(newList);\n        break;\n      default:\n    }\n  };\n  classroomWs.onclose = event => {\n    console.log(\"close ws\");\n  };\n}\nexport function closeClassroomWs() {\n  if (classroomWs !== undefined) {\n    classroomWs.close();\n  }\n}","map":{"version":3,"names":["getUserId","classroomWsUrl","classroomWs","startClassroomWs","setClassroomList","classroomList","WebSocket","onmessage","event","message","JSON","parse","data","cmd","newList","map","classroom","classroomId","status","console","log","onclose","closeClassroomWs","undefined","close"],"sources":["/Users/hongyixun/Desktop/tmentor/tmentor_web/src/pages/classroom/controller/ws_controller.js"],"sourcesContent":["import { getUserId } from \"../../../cookie_handler/user_cookie_handler\"\nconst classroomWsUrl = \"ws://35.229.189.182/ws/classroom\"\nlet classroomWs\n\nexport function startClassroomWs(setClassroomList, classroomList) {\n    classroomWs = new WebSocket(classroomWsUrl + \"/?userId=\" + getUserId() + \"&applicationType=app\")\n    classroomWs.onmessage = function(event) {\n        const message = JSON.parse(event.data)\n        switch(message.cmd) {\n            case \"open room\":\n                const newList = classroomList.map((classroom) => {\n                    if(classroom.classroomId === message.classroomId) {\n                        return {...classroom, status: 'online'}\n                    }\n                    return classroom\n                })\n                console.log(newList)\n                setClassroomList(newList)\n                break;\n            default:\n                \n          }\n    }\n\n    classroomWs.onclose = (event) => {\n        console.log(\"close ws\")\n    }\n}\n\nexport function closeClassroomWs() {\n    if(classroomWs !== undefined) {\n        classroomWs.close()\n    }\n}"],"mappings":"AAAA,SAASA,SAAS,QAAQ,6CAA6C;AACvE,MAAMC,cAAc,GAAG,kCAAkC;AACzD,IAAIC,WAAW;AAEf,OAAO,SAASC,gBAAgBA,CAACC,gBAAgB,EAAEC,aAAa,EAAE;EAC9DH,WAAW,GAAG,IAAII,SAAS,CAACL,cAAc,GAAG,WAAW,GAAGD,SAAS,EAAE,GAAG,sBAAsB,CAAC;EAChGE,WAAW,CAACK,SAAS,GAAG,UAASC,KAAK,EAAE;IACpC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;IACtC,QAAOH,OAAO,CAACI,GAAG;MACd,KAAK,WAAW;QACZ,MAAMC,OAAO,GAAGT,aAAa,CAACU,GAAG,CAAEC,SAAS,IAAK;UAC7C,IAAGA,SAAS,CAACC,WAAW,KAAKR,OAAO,CAACQ,WAAW,EAAE;YAC9C,OAAO;cAAC,GAAGD,SAAS;cAAEE,MAAM,EAAE;YAAQ,CAAC;UAC3C;UACA,OAAOF,SAAS;QACpB,CAAC,CAAC;QACFG,OAAO,CAACC,GAAG,CAACN,OAAO,CAAC;QACpBV,gBAAgB,CAACU,OAAO,CAAC;QACzB;MACJ;IAAQ;EAGhB,CAAC;EAEDZ,WAAW,CAACmB,OAAO,GAAIb,KAAK,IAAK;IAC7BW,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;EAC3B,CAAC;AACL;AAEA,OAAO,SAASE,gBAAgBA,CAAA,EAAG;EAC/B,IAAGpB,WAAW,KAAKqB,SAAS,EAAE;IAC1BrB,WAAW,CAACsB,KAAK,EAAE;EACvB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}