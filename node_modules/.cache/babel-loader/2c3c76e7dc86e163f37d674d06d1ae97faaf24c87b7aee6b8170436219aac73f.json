{"ast":null,"code":"import { getUserId } from \"../../../cookie_handler/user_cookie_handler\";\nconst classroomWsUrl = \"ws://35.229.189.182/ws/classroom\";\nlet classroomWs;\nexport function startClassroomWs(setClassroomList, classroomList) {\n  classroomWs = new WebSocket(classroomWsUrl + \"/?userId=\" + getUserId() + \"&applicationType=app\");\n  classroomWs.onmessage = function (event) {\n    const message = JSON.parse(event.data);\n    switch (msg.type) {\n      case \"id\":\n        clientID = msg.id;\n        setUsername();\n        break;\n      case \"username\":\n        text = \"<b>使用者 <em>\" + msg.name + \"</em> 登入於 \" + timeStr + \"</b><br>\";\n        break;\n      case \"message\":\n        text = \"(\" + timeStr + \") <b>\" + msg.name + \"</b>: \" + msg.text + \"<br>\";\n        break;\n      case \"rejectusername\":\n        text = \"<b>由於你選取的名字已被人使用，你的使用者名稱已被設置為 <em>\" + msg.name + \"</em>。\";\n        break;\n      case \"userlist\":\n        var ul = \"\";\n        for (i = 0; i < msg.users.length; i++) {\n          ul += msg.users[i] + \"<br>\";\n        }\n        document.getElementById(\"userlistbox\").innerHTML = ul;\n        break;\n    }\n  };\n  classroomWs.onclose = event => {\n    console.log(\"close ws\");\n  };\n}\nexport function closeClassroomWs() {\n  if (classroomWs !== undefined) {\n    classroomWs.close();\n  }\n}","map":{"version":3,"names":["getUserId","classroomWsUrl","classroomWs","startClassroomWs","setClassroomList","classroomList","WebSocket","onmessage","event","message","JSON","parse","data","msg","type","clientID","id","setUsername","text","name","timeStr","ul","i","users","length","document","getElementById","innerHTML","onclose","console","log","closeClassroomWs","undefined","close"],"sources":["/Users/hongyixun/Desktop/tmentor/tmentor_web/src/pages/classroom/controller/ws_controller.js"],"sourcesContent":["import { getUserId } from \"../../../cookie_handler/user_cookie_handler\"\nconst classroomWsUrl = \"ws://35.229.189.182/ws/classroom\"\nlet classroomWs\n\nexport function startClassroomWs(setClassroomList, classroomList) {\n    classroomWs = new WebSocket(classroomWsUrl + \"/?userId=\" + getUserId() + \"&applicationType=app\")\n    classroomWs.onmessage = function(event) {\n        const message = JSON.parse(event.data)\n        switch(msg.type) {\n            case \"id\":\n              clientID = msg.id;\n              setUsername();\n              break;\n            case \"username\":\n              text = \"<b>使用者 <em>\" + msg.name + \"</em> 登入於 \" + timeStr + \"</b><br>\";\n              break;\n            case \"message\":\n              text = \"(\" + timeStr + \") <b>\" + msg.name + \"</b>: \" + msg.text + \"<br>\";\n              break;\n            case \"rejectusername\":\n              text = \"<b>由於你選取的名字已被人使用，你的使用者名稱已被設置為 <em>\" + msg.name + \"</em>。\";\n              break;\n            case \"userlist\":\n              var ul = \"\";\n              for (i=0; i < msg.users.length; i++) {\n                ul += msg.users[i] + \"<br>\";\n              }\n              document.getElementById(\"userlistbox\").innerHTML = ul;\n              break;\n          }\n    }\n\n    classroomWs.onclose = (event) => {\n        console.log(\"close ws\")\n    }\n}\n\nexport function closeClassroomWs() {\n    if(classroomWs !== undefined) {\n        classroomWs.close()\n    }\n}"],"mappings":"AAAA,SAASA,SAAS,QAAQ,6CAA6C;AACvE,MAAMC,cAAc,GAAG,kCAAkC;AACzD,IAAIC,WAAW;AAEf,OAAO,SAASC,gBAAgBA,CAACC,gBAAgB,EAAEC,aAAa,EAAE;EAC9DH,WAAW,GAAG,IAAII,SAAS,CAACL,cAAc,GAAG,WAAW,GAAGD,SAAS,EAAE,GAAG,sBAAsB,CAAC;EAChGE,WAAW,CAACK,SAAS,GAAG,UAASC,KAAK,EAAE;IACpC,MAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;IACtC,QAAOC,GAAG,CAACC,IAAI;MACX,KAAK,IAAI;QACPC,QAAQ,GAAGF,GAAG,CAACG,EAAE;QACjBC,WAAW,EAAE;QACb;MACF,KAAK,UAAU;QACbC,IAAI,GAAG,aAAa,GAAGL,GAAG,CAACM,IAAI,GAAG,YAAY,GAAGC,OAAO,GAAG,UAAU;QACrE;MACF,KAAK,SAAS;QACZF,IAAI,GAAG,GAAG,GAAGE,OAAO,GAAG,OAAO,GAAGP,GAAG,CAACM,IAAI,GAAG,QAAQ,GAAGN,GAAG,CAACK,IAAI,GAAG,MAAM;QACxE;MACF,KAAK,gBAAgB;QACnBA,IAAI,GAAG,oCAAoC,GAAGL,GAAG,CAACM,IAAI,GAAG,QAAQ;QACjE;MACF,KAAK,UAAU;QACb,IAAIE,EAAE,GAAG,EAAE;QACX,KAAKC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAGT,GAAG,CAACU,KAAK,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;UACnCD,EAAE,IAAIR,GAAG,CAACU,KAAK,CAACD,CAAC,CAAC,GAAG,MAAM;QAC7B;QACAG,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACC,SAAS,GAAGN,EAAE;QACrD;IAAM;EAEhB,CAAC;EAEDnB,WAAW,CAAC0B,OAAO,GAAIpB,KAAK,IAAK;IAC7BqB,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;EAC3B,CAAC;AACL;AAEA,OAAO,SAASC,gBAAgBA,CAAA,EAAG;EAC/B,IAAG7B,WAAW,KAAK8B,SAAS,EAAE;IAC1B9B,WAAW,CAAC+B,KAAK,EAAE;EACvB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}