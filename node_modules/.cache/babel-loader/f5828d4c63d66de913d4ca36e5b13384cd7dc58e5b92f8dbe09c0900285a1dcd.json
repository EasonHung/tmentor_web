{"ast":null,"code":"import { getClassroomId } from \"../../../api_handler/classroom_api_handler\";\nimport { getUserId } from \"../../../cookie_handler/user_cookie_handler\";\nexport async function openClassroom(classroomWs, classSetting) {\n  classroomWs.send(JSON.stringify({\n    cmd: \"open room\",\n    senderId: getUserId(),\n    applicationType: \"web\",\n    classroomId: await getClassroomId(),\n    message: JSON.stringify(classSetting)\n  }));\n}\nexport async function closeClassroom(classroomWs) {\n  classroomWs.send(JSON.stringify({\n    cmd: \"close room\",\n    senderId: getUserId(),\n    applicationType: \"web\",\n    classroomId: await getClassroomId(),\n    message: \"\"\n  }));\n}\nexport async function onRequireAccess(classroomWs, setOpenModal, setModalContant, message) {\n  const userInfo = JSON.parse(message.message);\n  setModalContant({\n    title: userInfo.userNickname + \"想要加入教室\",\n    body: \"要允許其加入教室嗎？\",\n    confirmFunction: () => {\n      accepetAccess(classroomWs, message.senderId, message.applicationType);\n    },\n    cancelFunction: () => {\n      rejectAccess(classroomWs, message.senderId, message.applicationType);\n    }\n  });\n  setOpenModal(true);\n}\nexport function showEnterConfirmModal(classroomWs, classroomInfo, setModalContant, setOpenModal, setIsInClassroom) {\n  setModalContant({\n    title: \"即將進入\" + classroomInfo.teacherNickname + \"的教室\",\n    body: \"上課時間：\" + classroomInfo.classTime,\n    confirmFunction: () => {},\n    cancelFunction: () => {}\n  });\n  setOpenModal(true);\n}\nconst accessClassroom = async (classroomWs, classroomId, setIsInClassroom) => {\n  setIsInClassroom(true);\n  classroomWs.send({\n    \"cmd\": \"ask\",\n    \"senderId\": userId,\n    \"applicationType\": \"app\",\n    \"classroomId\": classroomId\n  });\n};\nconst accepetAccess = async (classroomWs, receiverId, receiverApplicationType) => {\n  classroomWs.send(JSON.stringify({\n    cmd: \"accept\",\n    senderId: getUserId(),\n    applicationType: \"web\",\n    recieverId: receiverId,\n    receiverApplicationType: receiverApplicationType,\n    classroomId: await getClassroomId(),\n    message: \"\"\n  }));\n};\nconst rejectAccess = async (classroomWs, receiverId, receiverApplicationType) => {\n  classroomWs.send(JSON.stringify({\n    cmd: \"reject\",\n    senderId: getUserId(),\n    applicationType: \"web\",\n    recieverId: receiverId,\n    receiverApplicationType: receiverApplicationType,\n    classroomId: await getClassroomId(),\n    message: \"\"\n  }));\n};","map":{"version":3,"names":["getClassroomId","getUserId","openClassroom","classroomWs","classSetting","send","JSON","stringify","cmd","senderId","applicationType","classroomId","message","closeClassroom","onRequireAccess","setOpenModal","setModalContant","userInfo","parse","title","userNickname","body","confirmFunction","accepetAccess","cancelFunction","rejectAccess","showEnterConfirmModal","classroomInfo","setIsInClassroom","teacherNickname","classTime","accessClassroom","userId","receiverId","receiverApplicationType","recieverId"],"sources":["/Users/hongyixun/Desktop/tmentor/tmentor_web/src/pages/classroom/service/classroom_access_service.js"],"sourcesContent":["import { getClassroomId } from \"../../../api_handler/classroom_api_handler\";\nimport { getUserId } from \"../../../cookie_handler/user_cookie_handler\";\n\nexport async function openClassroom(classroomWs, classSetting) {\n    classroomWs.send(\n        JSON.stringify({\n            cmd: \"open room\",\n            senderId: getUserId(),\n            applicationType: \"web\",\n            classroomId: await getClassroomId(),\n            message: JSON.stringify(classSetting)\n        })\n    )\n}\n\nexport async function closeClassroom(classroomWs) {\n    classroomWs.send(\n        JSON.stringify({\n            cmd: \"close room\",\n            senderId: getUserId(),\n            applicationType: \"web\",\n            classroomId: await getClassroomId(),\n            message: \"\"\n        })\n    )\n}\n\nexport async function onRequireAccess(classroomWs, setOpenModal, setModalContant, message) {\n    const userInfo = JSON.parse(message.message)\n\n    setModalContant({\n        title: userInfo.userNickname + \"想要加入教室\",\n        body: \"要允許其加入教室嗎？\",\n        confirmFunction: () => {\n            accepetAccess(classroomWs, message.senderId, message.applicationType)\n        },\n        cancelFunction: () => {\n            rejectAccess(classroomWs, message.senderId, message.applicationType)\n        }\n    })\n    setOpenModal(true)\n}\n\nexport function showEnterConfirmModal(classroomWs, classroomInfo, setModalContant, setOpenModal, setIsInClassroom) {\n    setModalContant({\n        title: \"即將進入\" + classroomInfo.teacherNickname + \"的教室\",\n        body: \"上課時間：\" + classroomInfo.classTime,\n        confirmFunction: () => {\n            \n        },\n        cancelFunction: () => {\n\n        }\n    })\n\n    setOpenModal(true)\n}\n\nconst accessClassroom = async (classroomWs, classroomId, setIsInClassroom) => {\n    setIsInClassroom(true)\n    classroomWs.send({\n        \"cmd\": \"ask\",\n        \"senderId\": userId,\n        \"applicationType\": \"app\",\n        \"classroomId\": classroomId,\n    })\n}\n\nconst accepetAccess = async (classroomWs, receiverId, receiverApplicationType) => {\n    classroomWs.send(\n        JSON.stringify({\n            cmd: \"accept\",\n            senderId: getUserId(),\n            applicationType: \"web\",\n            recieverId: receiverId,\n            receiverApplicationType: receiverApplicationType,\n            classroomId: await getClassroomId(),\n            message: \"\"\n        })\n    )\n}\n\nconst rejectAccess = async (classroomWs, receiverId, receiverApplicationType) => {\n    classroomWs.send(\n        JSON.stringify({\n            cmd: \"reject\",\n            senderId: getUserId(),\n            applicationType: \"web\",\n            recieverId: receiverId,\n            receiverApplicationType: receiverApplicationType,\n            classroomId: await getClassroomId(),\n            message: \"\"\n        })\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}